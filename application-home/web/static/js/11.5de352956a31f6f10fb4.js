webpackJsonp([11],{dtcm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("nv77"),n=a("STSY"),o=a("5ckB"),i=a("zL8q"),s={components:{BasePagination:o.a},data:function(){return{list:[],listLoading:!0,total:0,keyword:"",roleId:"",roles:[],editDialogVisible:!1,account:{},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],account:[{required:!0,message:"请输入账号",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"账号必须由数字字母组成",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur,change"}],mobile:[{type:"string",pattern:/^1(3|4|5|7|8)\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],roleId:[{required:!0,message:"角色必须选择",trigger:"blur"}],isEnable:[{required:!0,message:"状态必须选择",trigger:"blur"}]}}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;Object(n.b)().then(function(t){e.roles=t.data.list}),this.listLoading=!0;var t=this.$refs.pageinfo.getPageParam;t.keyword=this.keyword,t.roleId=this.roleId,Object(l.d)(t).then(function(t){e.list=t.data.list,e.total=t.data.total,e.listLoading=!1})},paraseStatus:function(e){return 1===e?"已启用":"已禁用"},paraseColorByStatus:function(e){return 1===e?"#67C23A":"#E6A23C"},changeStatus:function(e){var t=this;Object(l.a)(e).then(function(a){1===e.isEnable?Object(i.Message)({message:"帐号禁用成功",type:"success",duration:3e3}):Object(i.Message)({message:"帐号启用成功",type:"success",duration:3e3}),t.fetchData()})},resetpwd:function(e){var t=this;Object(l.f)(e.accountId).then(function(e){Object(i.Message)({message:"密码重置成功",type:"success",duration:3e3}),t.fetchData()})},edit:function(e){this.account=e,this.editDialogVisible=!0},saveForm:function(){var e=this;this.$refs.editForm.validate(function(t){if(!t)return!1;Object(l.g)(e.account).then(function(t){e.editDialogVisible=!1,e.fetchData()})})},cancelEdit:function(){this.editDialogVisible=!1,this.$refs.editForm.resetFields()},addNew:function(){this.account={isEnable:1,sex:"男"},this.editDialogVisible=!0},del:function(e){var t=this;i.MessageBox.confirm("确认删除次记录？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.b)(e.accountId).then(function(e){Object(i.Message)({message:"帐号删除成功",type:"success",duration:3e3}),t.fetchData()})})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"角色"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.roleId,callback:function(t){e.roleId=t},expression:"roleId"}},e._l(e.roles,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.name,value:e.roleId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{size:"mini",placeholder:"帐号 姓名 电话 邮箱",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fetchData}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.addNew}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","max-height":"760"}},[a("el-table-column",{attrs:{label:"帐号",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.account)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"角色",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.role.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"性别",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sex))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"邮箱",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.email)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"电话",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.mobile)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击更改帐号状态",placement:"bottom"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.changeStatus(t.row)}}},[a("font",{attrs:{color:e.paraseColorByStatus(t.row.isEnable)}},[e._v(e._s(e.paraseStatus(t.row.isEnable)))])],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.address)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"重置后密码与账号名相同",placement:"bottom"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.resetpwd(t.row)}}},[e._v("重置密码")])],1),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("base-pagination",{ref:"pageinfo",attrs:{total:e.total},on:{change:e.fetchData}}),e._v(" "),a("el-dialog",{attrs:{title:"帐号信息",visible:e.editDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.account,rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名","label-width":"120px",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.account.name,callback:function(t){e.$set(e.account,"name",t)},expression:"account.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"帐号","label-width":"120px",prop:"account"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.account.account,callback:function(t){e.$set(e.account,"account",t)},expression:"account.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱","label-width":"120px",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.account.email,callback:function(t){e.$set(e.account,"email",t)},expression:"account.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话","label-width":"120px",prop:"mobile"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.account.mobile,callback:function(t){e.$set(e.account,"mobile",t)},expression:"account.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":"120px"}},[a("el-radio",{attrs:{label:"男"},model:{value:e.account.sex,callback:function(t){e.$set(e.account,"sex",t)},expression:"account.sex"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"女"},model:{value:e.account.sex,callback:function(t){e.$set(e.account,"sex",t)},expression:"account.sex"}},[e._v("女")])],1),e._v(" "),a("el-form-item",{attrs:{label:"角色","label-width":"120px",prop:"roleId"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.account.roleId,callback:function(t){e.$set(e.account,"roleId",t)},expression:"account.roleId"}},e._l(e.roles,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.name,value:e.roleId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":"120px",prop:"isEnable"}},[a("el-radio-group",{model:{value:e.account.isEnable,callback:function(t){e.$set(e.account,"isEnable",t)},expression:"account.isEnable"}},[a("el-radio",{attrs:{label:0}},[e._v("禁用")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("启用")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"地址","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.account.address,callback:function(t){e.$set(e.account,"address",t)},expression:"account.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.account.remark,callback:function(t){e.$set(e.account,"remark",t)},expression:"account.remark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelEdit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveForm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},c=a("VU/8")(s,r,!1,null,null,null);t.default=c.exports}});